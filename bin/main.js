(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var ChainManager, build_chain, build_text, manager;

ChainManager = require("./chain_manager.coffee");

manager = null;

window.onload = function() {
  manager = new ChainManager();
  document.querySelector("#start").onclick = build_chain;
  return document.querySelector("#print").onclick = build_text;
};

build_chain = function() {
  var k_val, text;
  k_val = document.querySelector("#kval").value;
  text = document.querySelector("#text").value;
  return manager.build_chain(text, k_val);
};

build_text = function() {
  var div, length, output;
  length = document.querySelector("#length").value;
  output = manager.generate_text(length);
  div = document.querySelector("#output");
  return div.innerHTML = output;
};



},{"./chain_manager.coffee":2}],2:[function(require,module,exports){
var ChainManager, MarkovChain;

MarkovChain = require("./markov_chain.coffee");

ChainManager = (function() {
  ChainManager.chain = null;

  ChainManager.text = null;

  ChainManager.k = null;

  function ChainManager() {
    console.log("made new chain manager");
  }

  ChainManager.prototype.build_chain = function(text, k) {
    var diff, i, j, key, ref, results, value;
    console.log("constructed new chain");
    this.chain = new MarkovChain();
    this.text = text;
    this.k = parseInt(k, 10);
    results = [];
    for (i = j = 0, ref = text.length - 1; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {
      if (i < (text.length - this.k)) {
        key = text.substring(i, i + this.k);
        value = text.substring(i + 1, i + this.k + 1);
      } else {
        diff = (i + this.k) - text.length;
        key = text.substring(i, i + this.k) + text.substring(0, diff);
        value = text.substring(i + 1, i + this.k + 1) + text.substring(0, diff + 1);
      }
      results.push(this.chain.add_transition(key, value));
    }
    return results;
  };

  ChainManager.prototype.generate_text = function(M) {
    var i, j, m, output, ref, state;
    m = parseInt(M, 10);
    if (this.chain == null) {
      alert("try building a markov chain first");
      return "";
    }
    state = this.text.slice(0, this.k);
    output = "" + state;
    for (i = j = 0, ref = m - this.k - 1; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {
      state = this.chain.next(state);
      if (state === -1 || (state == null)) {
        return output;
      }
      output = output + this.chain.last_char(state);
    }
    return output;
  };

  return ChainManager;

})();

module.exports = ChainManager;



},{"./markov_chain.coffee":3}],3:[function(require,module,exports){
var MarkovChain;

MarkovChain = (function() {
  MarkovChain.dict = null;

  function MarkovChain() {
    console.log("making new markov chain");
    this.dict = {};
  }

  MarkovChain.prototype.add_transition = function(v, w) {
    var base, base1;
    if ((base = this.dict)[v] == null) {
      base[v] = [];
    }
    this.dict[v].push(w);
    return (base1 = this.dict)[w] != null ? base1[w] : base1[w] = [];
  };

  MarkovChain.prototype.next = function(v) {
    var len, rand;
    len = this.dict[v].length;
    rand = Math.floor(Math.random() * len);
    return this.dict[v][rand];
  };

  MarkovChain.prototype.print = function() {
    var i, results;
    console.log("keys: ");
    results = [];
    for (i in this.dict) {
      results.push(console.log(i));
    }
    return results;
  };

  MarkovChain.prototype.print_neighbors = function(v) {
    var i, j, len, ref, results;
    len = this.dict[v].length;
    console.log(len);
    results = [];
    for (i = j = 0, ref = len - 1; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {
      results.push(console.log(this.dict[v][i]));
    }
    return results;
  };

  MarkovChain.prototype.last_char = function(v) {
    return v.slice(-1);
  };

  return MarkovChain;

})();

module.exports = MarkovChain;



},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvbWljaGFlbHdpa3RvcmVrL1NpdGVzL21hcmtvdl90ZXh0L3NyYy9tYWluLmNvZmZlZSIsIi9Vc2Vycy9taWNoYWVsd2lrdG9yZWsvU2l0ZXMvbWFya292X3RleHQvc3JjL2NoYWluX21hbmFnZXIuY29mZmVlIiwiL1VzZXJzL21pY2hhZWx3aWt0b3Jlay9TaXRlcy9tYXJrb3ZfdGV4dC9zcmMvbWFya292X2NoYWluLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLElBQUEsOENBQUE7O0FBQUEsWUFBQSxHQUFlLE9BQUEsQ0FBUSx3QkFBUixDQUFmLENBQUE7O0FBQUEsT0FDQSxHQUFVLElBRFYsQ0FBQTs7QUFBQSxNQUdNLENBQUMsTUFBUCxHQUFnQixTQUFBLEdBQUE7QUFDZCxFQUFBLE9BQUEsR0FBYyxJQUFBLFlBQUEsQ0FBQSxDQUFkLENBQUE7QUFBQSxFQUNBLFFBQVEsQ0FBQyxhQUFULENBQXVCLFFBQXZCLENBQWdDLENBQUMsT0FBakMsR0FBMkMsV0FEM0MsQ0FBQTtTQUVBLFFBQVEsQ0FBQyxhQUFULENBQXVCLFFBQXZCLENBQWdDLENBQUMsT0FBakMsR0FBMkMsV0FIN0I7QUFBQSxDQUhoQixDQUFBOztBQUFBLFdBUUEsR0FBYyxTQUFBLEdBQUE7QUFDWixNQUFBLFdBQUE7QUFBQSxFQUFBLEtBQUEsR0FBUSxRQUFRLENBQUMsYUFBVCxDQUF1QixPQUF2QixDQUErQixDQUFDLEtBQXhDLENBQUE7QUFBQSxFQUNBLElBQUEsR0FBTyxRQUFRLENBQUMsYUFBVCxDQUF1QixPQUF2QixDQUErQixDQUFDLEtBRHZDLENBQUE7U0FFQSxPQUFPLENBQUMsV0FBUixDQUFvQixJQUFwQixFQUEwQixLQUExQixFQUhZO0FBQUEsQ0FSZCxDQUFBOztBQUFBLFVBYUEsR0FBYSxTQUFBLEdBQUE7QUFDWCxN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b250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiQ2hhaW5NYW5hZ2VyID0gcmVxdWlyZSBcIi4vY2hhaW5fbWFuYWdlci5jb2ZmZWVcIlxubWFuYWdlciA9IG51bGxcblxud2luZG93Lm9ubG9hZCA9IC0+XG4gIG1hbmFnZXIgPSBuZXcgQ2hhaW5NYW5hZ2VyKClcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzdGFydFwiKS5vbmNsaWNrID0gYnVpbGRfY2hhaW5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmludFwiKS5vbmNsaWNrID0gYnVpbGRfdGV4dFxuXG5idWlsZF9jaGFpbiA9IC0+XG4gIGtfdmFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNrdmFsXCIpLnZhbHVlXG4gIHRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RleHRcIikudmFsdWVcbiAgbWFuYWdlci5idWlsZF9jaGFpbih0ZXh0LCBrX3ZhbClcblxuYnVpbGRfdGV4dCA9IC0+XG4gIGxlbmd0aCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGVuZ3RoXCIpLnZhbHVlXG4gIG91dHB1dCA9IG1hbmFnZXIuZ2VuZXJhdGVfdGV4dChsZW5ndGgpXG4gIGRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3V0cHV0XCIpXG4gIGRpdi5pbm5lckhUTUwgPSBvdXRwdXQiLCIjIGJ1aWxkcyBhIG1hcmtvdiBjaGFpbiBiYXNlZCBvbiBpbnB1dCB0ZXh0XG4jIHRoZW4gY2FuIGdlbmVyYXRlIG91dHB1dCB0ZXh0IG9yIHNvbWV0aGluZ1xuXG5NYXJrb3ZDaGFpbiA9IHJlcXVpcmUgXCIuL21hcmtvdl9jaGFpbi5jb2ZmZWVcIlxuXG5jbGFzcyBDaGFpbk1hbmFnZXJcbiAgQGNoYWluOiBudWxsICMgb3VyIG1hcmtvdiBjaGFpblxuICBAdGV4dDogbnVsbCAjIHN0cmluZyBvZiB0ZXh0XG4gIEBrOiBudWxsXG5cbiAgY29uc3RydWN0b3I6IC0+XG4gICAgY29uc29sZS5sb2coXCJtYWRlIG5ldyBjaGFpbiBtYW5hZ2VyXCIpXG5cbiAgIyBUT0RPIG1ha2UgaXQgY3ljbGljXG4gIGJ1aWxkX2NoYWluOiAodGV4dCwgaykgLT5cbiAgICBjb25zb2xlLmxvZyhcImNvbnN0cnVjdGVkIG5ldyBjaGFpblwiKVxuICAgIEBjaGFpbiA9IG5ldyBNYXJrb3ZDaGFpbigpXG4gICAgQHRleHQgPSB0ZXh0XG4gICAgQGsgPSBwYXJzZUludChrLCAxMClcbiAgICBmb3IgaSBpbiBbMC4udGV4dC5sZW5ndGggLSAxXVxuICAgICAgIyBrLWdyYW0gYW5kIG92ZXJsYXBwaW5nIGstZ3JhbVxuICAgICAgaWYgaSA8ICh0ZXh0Lmxlbmd0aCAtIEBrKVxuICAgICAgICBrZXkgPSB0ZXh0LnN1YnN0cmluZyhpLCBpICsgQGspXG4gICAgICAgIHZhbHVlID0gdGV4dC5zdWJzdHJpbmcoaSArIDEsIGkgKyBAayArIDEpXG4gICAgICBlbHNlXG4gICAgICAgIGRpZmYgPSAoaSArIEBrKSAtIHRleHQubGVuZ3RoXG4gICAgICAgIGtleSA9IHRleHQuc3Vic3RyaW5nKGksIGkgKyBAaykgKyB0ZXh0LnN1YnN0cmluZygwLCBkaWZmKVxuICAgICAgICB2YWx1ZSA9IHRleHQuc3Vic3RyaW5nKGkgKyAxLCBpICsgQGsgKyAxKSArIHRleHQuc3Vic3RyaW5nKDAsIGRpZmYgKyAxKVxuICAgICAgQGNoYWluLmFkZF90cmFuc2l0aW9uKGtleSwgdmFsdWUpXG5cbiAgIyBzcGl0IG91dCB0ZXh0IE0gY2hhcmFjdGVycyBsb25nXG4gIGdlbmVyYXRlX3RleHQ6IChNKSAtPlxuICAgIG0gPSBwYXJzZUludChNLCAxMClcbiAgICBpZiBub3QgQGNoYWluP1xuICAgICAgYWxlcnQgXCJ0cnkgYnVpbGRpbmcgYSBtYXJrb3YgY2hhaW4gZmlyc3RcIlxuICAgICAgcmV0dXJuIFwiXCJcbiAgICBzdGF0ZSA9IEB0ZXh0LnNsaWNlKDAsIEBrKVxuICAgICNAY2hhaW4ucHJpbnRfbmVpZ2hib3JzKHN0YXRlKVxuICAgIG91dHB1dCA9IFwiXCIgKyBzdGF0ZVxuICAgIGZvciBpIGluIFswLi4obS1Aay0xKV1cbiAgICAgIHN0YXRlID0gQGNoYWluLm5leHQoc3RhdGUpXG4gICAgICBpZiBzdGF0ZSA9PSAtMSBvciAobm90IHN0YXRlPylcbiAgICAgICAgcmV0dXJuIG91dHB1dFxuICAgICAgb3V0cHV0ID0gb3V0cHV0ICsgQGNoYWluLmxhc3RfY2hhcihzdGF0ZSlcbiAgICByZXR1cm4gb3V0cHV0XG5cblxubW9kdWxlLmV4cG9ydHMgPSBDaGFpbk1hbmFnZXIiLCIjIG1hcmtvdiBjaGFpbiBjbGFzc1xuIyBJIGd1ZXNzIGl0J3MgYSBncmFwaD9cbiMgbWFwcyBrLWdyYW1zIHRvIG92ZXJsYXBwaW5nIGN5Y2xpYyBrLWdyYW1zXG4jIGdpdmUgaXQgay1ncmFtcyBwbGVhc2UgKHN0cmluZ3Mgb2YgbGVuZ3RoIGspXG5cbmNsYXNzIE1hcmtvdkNoYWluXG4gIEBkaWN0OiBudWxsXG5cbiAgY29uc3RydWN0b3I6IC0+XG4gICAgY29uc29sZS5sb2cgXCJtYWtpbmcgbmV3IG1hcmtvdiBjaGFpblwiXG4gICAgQGRpY3QgPSB7fVxuXG4gICMgYWRkIGEgdHJhbnNpdGlvbiBiZXR3ZWVuIHR3byBrLWdyYW1zXG4gIGFkZF90cmFuc2l0aW9uOiAodiwgdykgLT5cbiAgICBAZGljdFt2XSA/PSBbXVxuICAgIEBkaWN0W3ZdLnB1c2godylcbiAgICBAZGljdFt3XSA/PSBbXVxuXG4gICMgdW5pZm9ybWx5IHNlbGVjdCBhIHJhbmRvbSBuZWlnaGJvclxuICBuZXh0OiAodikgLT5cbiAgICAjY29uc29sZS5sb2codilcbiAgICBsZW4gPSBAZGljdFt2XS5sZW5ndGhcbiAgICAjY29uc29sZS5sb2coXCJsZW4gXCIgKyBsZW4pXG4gICAgcmFuZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxlbilcbiAgICAjY29uc29sZS5sb2coXCJyYW5kIFwiICsgcmFuZClcbiAgICByZXR1cm4gQGRpY3Rbdl1bcmFuZF1cblxuICBwcmludDogLT5cbiAgICBjb25zb2xlLmxvZyhcImtleXM6IFwiKVxuICAgIGNvbnNvbGUubG9nKGkpIGZvciBpIG9mIEBkaWN0XG5cbiAgcHJpbnRfbmVpZ2hib3JzOiAodikgLT5cbiAgICBsZW4gPSBAZGljdFt2XS5sZW5ndGhcbiAgICBjb25zb2xlLmxvZyhsZW4pXG4gICAgZm9yIGkgaW4gWzAuLihsZW4tMSldXG4gICAgICBjb25zb2xlLmxvZyhAZGljdFt2XVtpXSlcblxuICAjIGdldCBsYXN0IGNoYXJhY3RlciBvZiBzdGF0ZVxuICBsYXN0X2NoYXI6ICh2KSAtPlxuICAgIHJldHVybiB2LnNsaWNlKC0xKVxuXG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IE1hcmtvdkNoYWluIl19
